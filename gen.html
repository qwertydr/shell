<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Flashcard Generator</title>
<style>
  body{
    margin:0;
    background:#111;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    font-family:Arial, sans-serif;
  }
  .app{
    display:flex;
    flex-direction:column;
    gap:12px;
    width:100%;
    max-width:430px;
    padding:12px;
  }
  .preview{
    background:#fff;
    border-radius:10px;
    overflow:hidden;
    box-shadow:0 8px 24px rgba(0,0,0,0.4);
  }
  canvas{
    width:100%;
    height:auto;
    display:block;
  }
  .controls{
    display:flex;
    gap:10px;
  }
  button{
    flex:1;
    padding:12px;
    border:none;
    border-radius:6px;
    font-weight:600;
    cursor:pointer;
    font-size:15px;
  }
  #randomBtn{ background:#c8102e; color:#fff; }
  #downloadBtn{ background:#000; color:#fff; }
</style>
</head>
<body>
<div class="app">
  <div class="preview"><canvas id="cardCanvas" width="1080" height="1080"></canvas></div>
  <div class="controls">
    <button id="randomBtn">Random Question</button>
    <button id="downloadBtn">Download</button>
  </div>
</div>

<script>
// ---------------- CONFIG ----------------
const META = {
  website:"www.example.com",
  facebook:"@examplefb",
  instagram:"@exampleig"
};
const questions = [
  {question:"Which data structure provides O(1) average-time insert, delete, and search?",options:["Array","Linked List","Hash Table","Binary Search Tree"]},
  {question:"What is the time complexity of Binary Search?",options:["O(1)","O(log n)","O(n)","O(n log n)"]},
  {question:"Which algorithm guarantees O(n log n) in worst case?",options:["Quick Sort","Merge Sort","Bubble Sort","Insertion Sort"]},
  {question:"In JavaScript, which keyword declares a block-scoped variable?",options:["var","let","function","this"]}
];
// ----------------------------------------

const canvas=document.getElementById("cardCanvas");
const ctx=canvas.getContext("2d");
let currentQ=null;

function rand(arr){return arr[Math.floor(Math.random()*arr.length)];}
function formatDate(d=new Date()){
  return d.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});
}
function wrap(ctx,text,maxWidth){
  const words=text.split(" ");
  let lines=[],line=words[0];
  for(let i=1;i<words.length;i++){
    const test=line+" "+words[i];
    if(ctx.measureText(test).width>maxWidth){
      lines.push(line);
      line=words[i];
    } else line=test;
  }
  lines.push(line);
  return lines;
}
function drawWrapped(ctx,text,x,y,maxWidth,maxHeight,font,maxSize){
  let size=maxSize;
  let lines=[];
  while(size>14){
    ctx.font=`${font} ${size}px Arial`;
    lines=wrap(ctx,text,maxWidth);
    if(lines.length*size*1.3<=maxHeight) break;
    size-=2;
  }
  ctx.textBaseline="top"; ctx.textAlign="left";
  let yy=y;
  for(let l of lines){ ctx.fillText(l,x,yy); yy+=size*1.3; }
}

function randomGradient(x,y,w,h){
  const g=ctx.createLinearGradient(x,y,x+w,y+h);
  g.addColorStop(0,`hsl(${Math.random()*360},80%,55%)`);
  g.addColorStop(1,`hsl(${Math.random()*360},80%,55%)`);
  return g;
}

function drawLogo(cx,cy,size){
  ctx.fillStyle="#c8102e";
  ctx.beginPath(); ctx.arc(cx,cy,size/2,0,Math.PI*2); ctx.fill();
  ctx.fillStyle="#fff";
  ctx.font=`bold ${size/2}px Arial`; ctx.textAlign="center"; ctx.textBaseline="middle";
  ctx.fillText("L",cx,cy);
}

// SVG-like simple icons
function drawFacebookIcon(x,y,size){
  ctx.fillStyle="#3b5998";
  ctx.fillRect(x,y,size,size);
  ctx.fillStyle="#fff";
  ctx.font=`bold ${size*0.8}px Arial`;
  ctx.textAlign="center"; ctx.textBaseline="middle";
  ctx.fillText("f",x+size/2,y+size/2);
}
function drawInstagramIcon(x,y,size){
  ctx.fillStyle="#e1306c";
  ctx.fillRect(x,y,size,size);
  ctx.strokeStyle="#fff"; ctx.lineWidth=3;
  ctx.strokeRect(x+4,y+4,size-8,size-8);
  ctx.fillStyle="#fff";
  ctx.beginPath(); ctx.arc(x+size/2,y+size/2,size*0.2,0,Math.PI*2); ctx.fill();
}

function drawCard(q){
  ctx.clearRect(0,0,1080,1080);
  ctx.fillStyle="#fff"; ctx.fillRect(0,0,1080,1080);

  // Header
  ctx.fillStyle="#000"; ctx.fillRect(0,0,1080,200);
  drawLogo(540,90,100);
  ctx.fillStyle=randomGradient(340,150,400,50);
  ctx.fillRect(340,150,400,50);
  ctx.fillStyle="#fff"; ctx.font="bold 28px Arial"; ctx.textAlign="center"; ctx.textBaseline="middle";
  ctx.fillText("Per Hour Question",540,175);

  // Question
  ctx.fillStyle="#000";
  drawWrapped(ctx,q.question,80,240,920,200,"bold",46);

  // Options
  const labels=["A","B","C","D"];
  let oy=500;
  for(let i=0;i<q.options.length;i++){
    ctx.fillStyle="#c8102e";
    ctx.beginPath(); ctx.arc(100,oy+30,26,0,Math.PI*2); ctx.fill();
    ctx.fillStyle="#fff"; ctx.font="bold 22px Arial"; ctx.textAlign="center"; ctx.textBaseline="middle";
    ctx.fillText(labels[i],100,oy+30);

    ctx.fillStyle="#000";
    drawWrapped(ctx,q.options[i],150,oy,880,60,"",26);
    oy+=90;
  }

  // Footer background
  ctx.fillStyle="#000"; ctx.fillRect(0,1000,1080,80);

  // Date left
  ctx.fillStyle="#fff"; ctx.font="18px Arial"; ctx.textAlign="left"; ctx.textBaseline="middle";
  ctx.fillText(formatDate(),60,1040);

  // Website center
  ctx.textAlign="center";
  ctx.fillText(META.website,540,1040);

  // Social icons + handles right
  let iconSize=32;
  drawFacebookIcon(820,1015,iconSize);
  ctx.fillStyle="#fff"; ctx.font="16px Arial"; ctx.textAlign="left"; ctx.fillText(META.facebook,860,1030);

  drawInstagramIcon(820,1055,iconSize);
  ctx.fillStyle="#fff"; ctx.fillText(META.instagram,860,1070);
}

function randomQuestion(){ currentQ=rand(questions); drawCard(currentQ); }
function downloadPNG(){
  if(!currentQ) randomQuestion();
  const link=document.createElement("a");
  link.download=`${Date.now()}.png`;
  link.href=canvas.toDataURL("image/png");
  link.click();
}
document.getElementById("randomBtn").onclick=randomQuestion;
document.getElementById("downloadBtn").onclick=downloadPNG;
randomQuestion();
</script>
</body>
</html>
