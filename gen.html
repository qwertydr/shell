<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Flashcard Generator</title>
<style>
  body{
    margin:0;
    background:#111;
    display:flex;
    align-items:center;
    justify-content:center;
    height:100vh;
    font-family:Arial, Helvetica, sans-serif;
  }
  .app{
    display:flex;
    flex-direction:column;
    gap:12px;
    width:100%;
    max-width:420px;
    padding:12px;
    box-sizing:border-box;
  }
  .preview{
    background:#fff;
    border-radius:10px;
    box-shadow:0 6px 18px rgba(0,0,0,0.4);
    overflow:hidden;
    width:100%;
  }
  canvas{
    width:100%;
    height:auto;
    display:block;
  }
  .controls{
    display:flex;
    gap:8px;
  }
  button{
    flex:1;
    padding:10px;
    border:none;
    border-radius:6px;
    font-weight:600;
    cursor:pointer;
    font-size:15px;
  }
  #randomBtn{ background:#c8102e; color:#fff; }
  #downloadBtn{ background:#000; color:#fff; }
</style>
</head>
<body>
<div class="app">
  <div class="preview"><canvas id="cardCanvas" width="1080" height="1080"></canvas></div>
  <div class="controls">
    <button id="randomBtn">Random Question</button>
    <button id="downloadBtn">Download</button>
  </div>
</div>

<script>
// ------------ CONFIG ----------------
const META = {
  website:"www.example.com",
  facebook:"facebook.com/example",
  instagram:"instagram.com/example"
};
const questions = [
  {question:"Which data structure provides O(1) average-time insert, delete, and search?",options:["Array","Linked List","Hash Table","Binary Search Tree"]},
  {question:"Time complexity of binary search?",options:["O(1)","O(log n)","O(n)","O(n log n)"]},
  {question:"Which sorting algorithm guarantees O(n log n) in worst case?",options:["Quick Sort","Merge Sort","Bubble Sort","Insertion Sort"]},
  {question:"In JavaScript, which keyword creates block-scoped variable?",options:["var","let","function","this"]}
];
// ------------------------------------

const canvas=document.getElementById("cardCanvas");
const ctx=canvas.getContext("2d");
let currentQ=null;

function rand(arr){return arr[Math.floor(Math.random()*arr.length)];}
function formatDate(d=new Date()){
  return d.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});
}

function wrapTextAutoSize(ctx,text,x,y,maxWidth,maxHeight,maxSize,minSize,lineHeight,align){
  let size=maxSize;
  let lines=[];
  while(size>=minSize){
    ctx.font=`bold ${size}px Arial`;
    ctx.textAlign=align;
    lines=wrap(ctx,text,maxWidth);
    if(lines.length*size*lineHeight<=maxHeight) break;
    size-=2;
  }
  let yy=y;
  for(let l of lines){
    ctx.fillText(l,x,yy);
    yy+=size*lineHeight;
  }
}
function wrap(ctx,text,maxWidth){
  let words=text.split(" ");
  let lines=[],line=words[0];
  for(let i=1;i<words.length;i++){
    let test=line+" "+words[i];
    if(ctx.measureText(test).width>maxWidth){
      lines.push(line);
      line=words[i];
    }else line=test;
  }
  lines.push(line);
  return lines;
}

function randomGradient(x,y,w,h){
  const c1=`hsl(${Math.random()*360},70%,55%)`;
  const c2=`hsl(${Math.random()*360},70%,55%)`;
  const g=ctx.createLinearGradient(x,y,x+w,y+h);
  g.addColorStop(0,c1);
  g.addColorStop(1,c2);
  return g;
}

function drawLogo(cx,cy,size){
  ctx.fillStyle="#c8102e";
  ctx.beginPath();
  ctx.arc(cx,cy,size/2,0,Math.PI*2);
  ctx.fill();
  ctx.fillStyle="#fff";
  ctx.font=`bold ${size/2}px Arial`;
  ctx.textAlign="center";
  ctx.textBaseline="middle";
  ctx.fillText("L",cx,cy); // simple letter logo
}

function drawCard(q){
  ctx.clearRect(0,0,1080,1080);
  ctx.fillStyle="#fff"; ctx.fillRect(0,0,1080,1080);

  // Header
  ctx.fillStyle="#000";
  ctx.fillRect(0,0,1080,200);
  drawLogo(540,90,100);
  ctx.fillStyle=randomGradient(340,150,400,50);
  ctx.fillRect(340,150,400,50);
  ctx.fillStyle="#fff";
  ctx.font="bold 28px Arial";
  ctx.textAlign="center";
  ctx.textBaseline="middle";
  ctx.fillText("Per Hour Question",540,175);

  // Question
  ctx.fillStyle="#000";
  wrapTextAutoSize(ctx,q.question,80,240,920,200,44,18,1.2,"left");

  // Options
  const labels=["A","B","C","D"];
  let oy=480;
  for(let i=0;i<q.options.length;i++){
    ctx.fillStyle="#c8102e";
    ctx.beginPath();
    ctx.arc(100,oy+30,30,0,Math.PI*2);
    ctx.fill();
    ctx.fillStyle="#fff";
    ctx.font="bold 26px Arial";
    ctx.textAlign="center"; ctx.textBaseline="middle";
    ctx.fillText(labels[i],100,oy+30);

    ctx.fillStyle="#000";
    wrapTextAutoSize(ctx,q.options[i],160,oy,880,60,28,14,1.1,"left");
    oy+=100;
  }

  // Footer
  ctx.strokeStyle="#ccc"; ctx.beginPath(); ctx.moveTo(80,980); ctx.lineTo(1000,980); ctx.stroke();
  ctx.fillStyle="#666"; ctx.font="16px Arial"; ctx.textAlign="left";
  ctx.fillText(formatDate(),80,1010);
  ctx.textAlign="center"; ctx.fillText(META.website,540,1010);
  ctx.textAlign="right"; ctx.fillText(`${META.facebook} | ${META.instagram}`,1000,1010);
}

function randomQuestion(){
  currentQ=rand(questions);
  drawCard(currentQ);
}
function downloadPNG(){
  if(!currentQ) randomQuestion();
  const link=document.createElement("a");
  link.download=`${Date.now()}.png`;
  link.href=canvas.toDataURL("image/png");
  link.click();
}

document.getElementById("randomBtn").onclick=randomQuestion;
document.getElementById("downloadBtn").onclick=downloadPNG;

randomQuestion();
</script>
</body>
</html>
